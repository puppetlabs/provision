# Reference

<!-- DO NOT EDIT: This document was generated by Puppet Strings -->

## Table of Contents

### Tasks

* [`abs`](#abs): Provision/Tear down a machine using abs
* [`docker`](#docker): Provision/Tear down a machine on docker
* [`docker_exp`](#docker_exp): Provision/Tear down a machine on docker
* [`fix_secure_path`](#fix_secure_path): Add puppet agent bin directory to sudo secure_path
* [`install_pe`](#install_pe): Installs PE on a target
* [`install_puppetserver`](#install_puppetserver): install puppetserver community edition
* [`lxd`](#lxd): Provision/Tear down an instance on LXD
* [`provision_service`](#provision_service): Provision/Tear down a list of machines using the provisioning service
* [`run_tests`](#run_tests): Run rspec tests against a target machine
* [`update_node_pp`](#update_node_pp): Creates a manifest file for a target node on pe server
* [`update_site_pp`](#update_site_pp): Updates the site.pp on a target
* [`vagrant`](#vagrant): Provision/Tear down a machine on vagrant

### Plans

* [`provision::agents`](#provision--agents)
* [`provision::agents_setup`](#provision--agents_setup)
* [`provision::provisioner`](#provision--provisioner)
* [`provision::puppetserver_setup`](#provision--puppetserver_setup)
* [`provision::server_setup`](#provision--server_setup)
* [`provision::teardown`](#provision--teardown)
* [`provision::tester`](#provision--tester)
* [`provision::tests_against_agents`](#provision--tests_against_agents)

## Tasks

### <a name="abs"></a>`abs`

Provision/Tear down a machine using abs

**Supports noop?** false

#### Parameters

##### `action`

Data type: `Enum[provision, tear_down]`

Action to perform, tear_down or provision

##### `inventory`

Data type: `Optional[String[1]]`

Location of the inventory file

##### `node_name`

Data type: `Optional[String[1]]`

The name of the node

##### `platform`

Data type: `Optional[Variant[String[1],Hash]]`

Provision a single platform or a Hash of platforms specifying the number of instances. eg 'ubuntu-1604-x86_64 or '{ "centos-7-x86_64":1, "centos-6-x86_64":2 }'

##### `vars`

Data type: `Optional[String[1]]`

key/value pairs to add to the vars section

### <a name="docker"></a>`docker`

Provision/Tear down a machine on docker

**Supports noop?** false

#### Parameters

##### `action`

Data type: `Enum[provision, tear_down]`

Action to perform, tear_down or provision

##### `inventory`

Data type: `Optional[String[1]]`

Location of the inventory file

##### `node_name`

Data type: `Optional[String[1]]`

The name of the node

##### `platform`

Data type: `Optional[String[1]]`

Platform to provision, eg  ubuntu:14.04

##### `vars`

Data type: `Optional[String[1]]`

YAML string of key/value pairs to add to the inventory vars section

### <a name="docker_exp"></a>`docker_exp`

Provision/Tear down a machine on docker

**Supports noop?** false

#### Parameters

##### `action`

Data type: `Enum[provision, tear_down]`

Action to perform, tear_down or provision

##### `inventory`

Data type: `Optional[String[1]]`

Location of the inventory file

##### `node_name`

Data type: `Optional[String[1]]`

The name of the node

##### `platform`

Data type: `Optional[String[1]]`

Platform to provision, eg  ubuntu:14.04

##### `vars`

Data type: `Optional[String[1]]`

YAML string of key/value pairs to add to the inventory vars section

### <a name="fix_secure_path"></a>`fix_secure_path`

Add puppet agent bin directory to sudo secure_path

**Supports noop?** false

#### Parameters

##### `path`

Data type: `Optional[String[1]]`

Puppet agent bin directory path

### <a name="install_pe"></a>`install_pe`

Installs PE on a target

**Supports noop?** false

#### Parameters

##### `version`

Data type: `Optional[String[1]]`

The release of PE you want to install e.g. 2018.1 (Default: 2019.2)

### <a name="install_puppetserver"></a>`install_puppetserver`

install puppetserver community edition

**Supports noop?** false

#### Parameters

##### `collection`

Data type: `Optional[String[1]]`

The name of the node

##### `platform`

Data type: `Optional[String[1]]`

The name of the node

##### `retry`

Data type: `Optional[Integer]`

The number of retries in case of network connectivity failures

### <a name="lxd"></a>`lxd`

Provision/Tear down an instance on LXD

**Supports noop?** false

#### Parameters

##### `action`

Data type: `Enum[provision, tear_down]`

Action to perform, tear_down or provision

##### `inventory`

Data type: `Optional[String[1]]`

Location of the inventory file

##### `node_name`

Data type: `Optional[String[1]]`

The name of the instance

##### `platform`

Data type: `Optional[String[1]]`

LXD image to use, eg images:ubuntu/22.04

##### `profiles`

Data type: `Optional[Array[String[1]]]`

LXD Profiles to apply

##### `storage`

Data type: `Optional[String[1]]`

LXD Storage pool name

##### `instance_type`

Data type: `Optional[String[1]]`

LXD Instance type

##### `vm`

Data type: `Optional[Boolean]`

Provision as a virtual-machine instead of a container

##### `remote`

Data type: `Optional[String]`

LXD remote, defaults to the LXD client configured default remote

##### `retries`

Data type: `Integer`

On provision check the instance is accepting commands, will be deleted if retries exceeded, 0 to disable

##### `vars`

Data type: `Optional[String[1]]`

YAML string of key/value pairs to add to the inventory vars section

### <a name="provision_service"></a>`provision_service`

Provision/Tear down a list of machines using the provisioning service

**Supports noop?** false

#### Parameters

##### `action`

Data type: `Enum[provision, tear_down]`

Action to perform, tear_down or provision

##### `platform`

Data type: `Optional[String[1]]`

Needed by litmus

##### `node_name`

Data type: `Optional[String[1]]`

Needed by litmus

##### `inventory`

Data type: `Optional[String[1]]`

Location of the inventory file

##### `vars`

Data type: `Optional[String[1]]`

The address of the provisioning service

##### `retry_attempts`

Data type: `Optional[Integer[1]]`

The number of times to retry the provisioning if it fails

### <a name="run_tests"></a>`run_tests`

Run rspec tests against a target machine

**Supports noop?** false

#### Parameters

##### `sut`

Data type: `String[1]`

The target SUT to run tests against

##### `test_path`

Data type: `Optional[String[1]]`

Location of the test files. Defaults to './spec/acceptance'

##### `format`

Data type: `Enum[progress, documentation]`



### <a name="update_node_pp"></a>`update_node_pp`

Creates a manifest file for a target node on pe server

**Supports noop?** false

#### Parameters

##### `manifest`

Data type: `String[1]`

The manifest code

##### `target_node`

Data type: `String[1]`

The target node

### <a name="update_site_pp"></a>`update_site_pp`

Updates the site.pp on a target

**Supports noop?** false

#### Parameters

##### `manifest`

Data type: `String[1]`

The manifest code

### <a name="vagrant"></a>`vagrant`

Provision/Tear down a machine on vagrant

**Supports noop?** false

#### Parameters

##### `action`

Data type: `Enum[provision, tear_down]`

Action to perform, tear_down or provision

##### `inventory`

Data type: `Optional[String[1]]`

Location of the inventory file

##### `node_name`

Data type: `Optional[String[1]]`

The name of the node

##### `platform`

Data type: `Optional[String[1]]`

Platform to provision, eg  ubuntu:14.04

##### `provider`

Data type: `Optional[String[1]]`

Provider to use provision, eg virtualbox

##### `cpus`

Data type: `Optional[Integer]`

Number of CPUs. Eg 2

##### `memory`

Data type: `Optional[Integer]`

MB Memory. Eg 4000

##### `hyperv_vswitch`

Data type: `Optional[String[1]]`

The Hyper-V virtual switch to spin the vagrant image up on

##### `hyperv_smb_username`

Data type: `Optional[String[1]]`

The username on the Hyper-V machine to use for authenticating the shared folder. Required to use Hyper-V with a synced folder.

##### `hyperv_smb_password`

Data type: `Optional[String[1]]`

The password on the Hyper-V machine to use for authenticating the shared folder. Required to use Hyper-V with a synced folder.

##### `enable_synced_folder`

Data type: `Optional[Boolean]`

Whether to use the vagrant synced folder for the provisioned machine

##### `box_url`

Data type: `Optional[String[1]]`

Path to the Vagrant Box URL

##### `password`

Data type: `Optional[String[1]]`

Password to use for Vagrant boxes without the default Vagrant insecure key

##### `vars`

Data type: `Optional[String[1]]`

YAML string of key/value pairs to add to the inventory vars section

## Plans

### <a name="provision--agents"></a>`provision::agents`

The provision::agents class.

### <a name="provision--agents_setup"></a>`provision::agents_setup`

The provision::agents_setup class.

#### Parameters

The following parameters are available in the `provision::agents_setup` plan:

* [`collection`](#-provision--agents_setup--collection)

##### <a name="-provision--agents_setup--collection"></a>`collection`

Data type: `Optional[String]`



Default value: `'puppet7'`

### <a name="provision--provisioner"></a>`provision::provisioner`

The provision::provisioner class.

### <a name="provision--puppetserver_setup"></a>`provision::puppetserver_setup`

The provision::puppetserver_setup class.

#### Parameters

The following parameters are available in the `provision::puppetserver_setup` plan:

* [`collection`](#-provision--puppetserver_setup--collection)

##### <a name="-provision--puppetserver_setup--collection"></a>`collection`

Data type: `Optional[String]`



Default value: `'puppet7'`

### <a name="provision--server_setup"></a>`provision::server_setup`

The provision::server_setup class.

### <a name="provision--teardown"></a>`provision::teardown`

The provision::teardown class.

### <a name="provision--tester"></a>`provision::tester`

The provision::tester class.

### <a name="provision--tests_against_agents"></a>`provision::tests_against_agents`

The provision::tests_against_agents class.

